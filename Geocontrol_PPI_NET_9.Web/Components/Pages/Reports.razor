@page "/reports"
@using Geocontrol_PPI_NET_9.Web.Services.Loading

@inject LoadingService loadingService
@inject IJSRuntime JS

<h3>Reporte - Power BI (Mock)</h3>

<div class="container mt-4">
    <div class="card">
        <div class="card-header bg-dark text-white">
            Visualización Power BI
        </div>
        <div class="card-body text-center">
            <!-- IFrame simula el reporte -->
            <iframe title="Power BI Report Mock"
                    width="100%"
                    height="500px"
                    src="https://app.powerbi.com/view?r=eyJrIjoiYzA2Yz...mockid..."
                    frameborder="0"
                    allowFullScreen="true">
            </iframe>
        </div>
    </div>
</div>

@code{
	protected override async Task OnAfterRenderAsync(bool firstRender)
	{
		try
		{
			await loadingService.ShowAsync("Cargando Información...");
			
		}
		catch (Exception ex)
		{
			Console.WriteLine(ex.Message);
			await JS.InvokeVoidAsync("alert", "X Error al cargar la información del reporte");
		}
		finally
		{
			await loadingService.HideAsync();
		}
	}
}
